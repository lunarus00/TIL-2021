# 032 이상 / 함수적 종속 / 정규화

## 1 이상(Anomaly)

- 이상이란 테이블에서 일부 속성들의 종속으로 인해 데이터의 중복이 발생하고, 이 중복(Redundancy)으로 인해 테이블 조작 시 문제가 발생하는 현상을 의미한다
- 이상의 종류에는 테이블 조작 중에 발생하는 삽입 이상(Insertion Anomaly), 삭제 이상(Deletion Anomaly), 갱신 이상(Update Anomaly)이 있다.
- 삽입 이상(Insertion Anomaly)
  - 테이블에 데이터를 삽입할 때 의도와는 상관없이 원하지 않은 값들로 인해 삽입할 수 없게 되는 현상이다
- 삭제 이상(Deletion Anomaly)
  - 테이블에서 한 튜플을 삭제할 때 의도와는 상관없는 값들도 함께 삭제되는, 즉 연쇄 삭제가 발생하는 현상이다
- 갱신 이상(Update Anomaly)
  - 테이블에서 튜플에 있는 속성 값을 갱신할 때 일부 튜플의 정보만 갱신되어 정보에 불일치성(Inconsistency)이 생기는 현상이다



## 2 함수적 종속(Functional Dependency)

- 어떤 테이블 R에서 X와 Y를 각각 R의 속성 집합의 부분 집합이라 하자. 속성 X의 값 각각에 대해 시간에 관계없이 항상 속성 Y의 값이 오직 하나만 연관되어 있을 때 Y는 X에 함수적 종속 또는 X가 Y를 함수적으로 결정한다고 하고, `X->Y`로 표기한다
- 함수적 종속은 데이터의 의미를 표현하는 것으로, 현실 세계를 표현하는 제약 조건이 되는 동시에 데이터베이스에서 항상 유지되어야 할 조건이다
- X->Y 의 관계를 갖는 속성 X와 Y에서 X를 결정자(Determinant)라 하고, Y를 종속자(Dependent)라고 한다. 예를 들어 '학번->이름' 에서는 학번이 결정자이고, 이름이 종속자이다



## 3 정규화(Nomalization)의 개념

- 정규화는 테이블의 속성들이 상호 종속적인 관계를 갖는 특성을 이용하여 테이블을 무손실 분해하는 과정이다
- 정규화의 목적은 가능한 한 중복을 제거하여 삽입, 삭제, 갱신 이상의 발생 가능성을 줄이는 것이다
- 정규형에는 제 1정규형(1NF; First Normal Form), 제 2정규형(2NF; Second Normal Form), 제 3정규형(3NF; Third Normal Form), BCNF(Boyce-Codd Normal Form), 제 4정규형(4NF; Fourth Normal Form), 제 5정규형(5NF; Fifth Normal Form)이 있으며, 순서대로 정규화의 정도가 높아진다



## 4 정규화 과정

- 제 1 정규형
  - 제 1 정규형은 테이블 R에 속한 모든 속성의 도메인(Domain)이 원자 값(Atomic Value)만으로 되어 있는 정규형이다. 즉 테이블의 모든 속성 값이 원자 값으로만 되어 있는 정규형이다
- 제 2 정규형
  - 제 2 정규형은 테이블 R이 제 1 정규형이고, 기본키가 아닌 모든 속성이 기본키에 대하여 완전 함수적 종속을 만족하는 정규형이다
- 제 3 정규형
  - 제 3 정규형은 테이블 R이 제 2 정규형이고 기본키가 아닌 모든 속성이 기본키에 대해 이행적 함수적 종속(Transitive Functional Dependency)을 만족하지 않는 정규형이다
    - 이행적 함수적 종속 : A -> B 이고 B -> C 일 때 A -> C 를 만족하는 관계를 이행적 함수적 종속이라 한다
- BCNF
  - BCNF는 테이블 R에서 모든 결정자가 후보키(Candidate Key)인 정규형이다
  - 일반적으로 제 3 정규형에 후보키가 여러 개 존재하고, 이러한 후보키들이 서로 중첩되어 나타나는 경우에 적용 가능하다
- 제 4 정규형
  - 제 4 정규형은 테이블 R에 다중 값 종속(MVD; Multi Valued Dependency) A ->-> B 가 존재할 경우 R의 모든 속성이 A에 함수적 종속 관계를 만족하는 정규형이다
- 제 5 정규형
  - 제 5 정규형은 테이블 R의 모든 조인 종속(JD; Join Dependency)이 R의 후보키를 통해서만 성립되는 정규형이다

