# 043 연계 장애 및 오류처리 구현

## 1 연계 메커니즘 구간별 장애 및 오류 모니터링 현황

- 연계 메커니즘에서 오류 발생 시점, 오류 로그 기록 장소, 오류 로그 기록 주체는 크게 공수신 시스템, 연계 서버 구간으로 나눈다
- 송신 시스템
  - 오류 발생 시점
    - 데이터 생성 및 추출 시
    - 코드 매핑 및 데이터 변환 시
    - 인터페이스 테이블 또는 파일 등록 시
  - 오류 로그 기록 장소
    - 송신 연계 프로그램에서 설정한 로그 및 오류 로그 테이블
  - 오류 로그 기록 주체
    - 별도로 구현한 송신용 연계 프로그램
- 수신 시스템
  - 오류 발생 시점
    - 연계 데이터 로드(Load) 시
    - 코드 매핑 및 데이터 변환 시
    - 운영 DB에 반영 시
  - 오류 로그 기록 장소
    - 수신 연계 프로그램에서 설정한 로그 및 오류 로그 테이블
  - 오류 로그 기록 주체
    - 별도로 구현한 수신용 연계 프로그램
- 연계 서버
  - 오류 발생 시점
    - 연계 데이터 로드(Load) 및 전송 형식으로 변환 시
    - 연계 데이터 송수신 시
    - 수신 시스템의 데이터 형식으로 변환 및 로드(Load) 시
  - 오류 로그 기록 장소
    - 연계 서버에 설정된 로그 및 오류 로그 테이블 또는 파일
  - 오류 로그 기록 주체
    - 연계 서버



## 2 장애 및 오류 유형과 처리 방안

- 장애 및 오류의 유형은 송수신 시스템의 연계 프로그램 오류, 연계 서버의 오류, 연계 데이터의 오류로 분류할 수 있다
- 장애 및 오류에 대해서는 송수신 시스템의 연계 프로그램과 연계 서버에서 기록하는 로그를 통해 장애 및 오류 원인을 확인하고 분석하여 적절한 처리 방안을 선택한다
- 오류 유형
  - 송신 시스템의 연계 프로그램
    - 내용
      - 데이터 생성 및 추출 권한이 없거나 데이터 변환 시 예외(Exception) 미처리 등 연계 프로그램 구현상의 오류
    - 예
      - 등록되지 않은 코드로 매핑 불가능
    - 처리 방안
      - 송수신 연계 프로그램의 로그를 확인하여 원인을 분석한 후 처리하고, 데이터 전송이나 반영을 재작업함
  - 수신 시스템의 연계 프로그램
    - 내용
      - 운영 DB 접근 권한이 없거나 데이터 변환 및 반영 시 예외(Exception) 미처리 등 연계 프로그램 구현상의 오류
    - 예
      - 등록된 데이터가 존재하지 않음
    - 처리 방안
      - 송수신 연계 프로그램의 로그를 확인하여 원인을 분석한 후 처리하고, 데이터 전송이나 반영을 재작업함
  - 연계 서버
    - 내용
      - 연계 서버 실행, 송수신, 전송 형식 변환 등 서버의 기능과 관련된 오류
    - 예
      - 연계 서버 미작동
      - 송수신 시스템의 IP 및 Port 접속 불가능
    - 처리 방안
      - 연계 서버를 재시작함
      - 연계 서버의 로그를 확인하여 원인을 분석한 후 처리함
  - 연계 데이터
    - 내용
      - 송신 시스템에서 생성 및 추출된 데이터의 값이 유효하지 않은 오류
    - 예
      - 유효하지 않은 날짜
    - 처리 방안
      - 송신 연계 프로그램의 로그를 확인하여 데이터를 보정한 후 재전송함



## 3 장애 및 오류의 확인과 처리 절차

- 장애 및 오류는 1차적으로 연계 서버에서 제공하는 장애 및 오류 현황 머니터링 화면을 통해 오류 원인 및 발생 현황을 확인한다
- 1차에서 확인이 불가능한 경우 송수신 시스템의 연계 프로그램과 연계 서버에서 기록한 오류 로그 테이블 또는 파일을 확인하여 오류 원인을 분석한다
- 발생한 오류에 대한 원인이 확인되면 원인에 따른 적절한 조치를 취한다
- 필요한 경우 송신 시스템에서는 연계 데이터의 생성 또는 추출을 다시 수행하고, 수신 시스템에서는 연계 데이터를 재수신하여 운영 DB에 반영한다



## 4 장애 및 오류의 정의와 설계

- 장애 및 오류 현황의 기록과 확인을 위해서는 다음 항목들을 정의하고 설계해야 한다



### 장애 및 오류 관리 대상

- 송수신 시스템의 연계 프로그램에서 관리하는 장애 및 오류를 관리 대상으로 정의한다
- 연계 서버의 장애 및 오류는 적용하는 연계 솔루션에 의해 관리되므로 따로 정의하지 않아도 된다



### 관리 대상의 장애 및 오류 코드와 메시지

- 관리 대상에서 식별한 오류 내용을 주제별로 분류한 후 각 오류 내용에 오류 코드를 부여하고 오류 메시지를 정의한다



### 장애 및 오류 코드와 메시지 관리 방식

- 오류 코드와 오류 메시지를 관리하는 방식에는 테이블 관리 방식과 파일 관리 방식이 있다
- 테이블 관리 방식은 관리 대상 오류 코드와 오류 메시지가 많은 경우, 파일 관리 방식은 관리 대상 오류 코드와 오류 메시지가 적은 경우 사용한다



### 장애 및 오류 기록 방식

- 오류 로그 테이블 또는 파일은 기록 단위에 따라 인터페이스 테이블 또는 파일에 대한 로그, 연계 데이터에 대한 로그로 설계한다